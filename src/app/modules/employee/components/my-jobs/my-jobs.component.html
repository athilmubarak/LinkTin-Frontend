<div class="flex flex-col w-full mx-6 my-3">
    <!-- <div class="flex">
        <fuse-alert class="mt-8 -mb-4" *ngIf="show_alert" [appearance]="'outline'" [showIcon]="false"
            [type]="alert.type" [@shake]="alert.type === 'error'">
            {{alert.message}}
        </fuse-alert>
    </div> -->
    <div class="flex flex-row justify-end w-full px-4 py-9">
        <div class="flex  sm:flex-row items-end  w-full max-w-xs sm:max-w-none">
           <mat-form-field class="fuse-mat-no-subscript w-full sm:w-36">
                <mat-select
                    [value]="0"
                    (selectionChange)="filterDataByType($event)">
                    <mat-option [value]="'all'">All</mat-option>
                    <ng-container *ngFor="let types of jobTypes;">
                        <mat-option [value]="types.id">{{types.value}}</mat-option>
                    </ng-container>
                </mat-select>
            </mat-form-field>
        </div>
    </div>
    <div class="grid grid-cols-1 gap-8 w-full mt-4">
        <div class="xl:col-span-3 mt-2 flex flex-col flex-auto overflow-hidden">
            <div class="overflow-x-auto mx-6">
                <table mat-table class="w-full bg-transparent" [dataSource]="data_source" matSort>
                    <ng-container matColumnDef="sl">
                        <th mat-header-cell *matHeaderCellDef> Sl </th>
                        <td mat-cell *matCellDef="let row; let i = index;"> {{ i + 1 }} </td>
                    </ng-container>
                    <ng-container matColumnDef="name">
                        <th mat-header-cell *matHeaderCellDef> Position </th>
                        <td mat-cell *matCellDef="let row;"> {{ row?.job_name }} </td>
                    </ng-container>
                    <ng-container matColumnDef="placement_type">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Company name </th>
                        <td mat-cell *matCellDef="let row;">
                            {{(row?.approved_user_id === current_user_id)? row.applied_user: (row?.applied_user_id === current_user_id)? row.approved_user:''}}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="vaccancy_count">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Applied / Requested on </th>
                        <td mat-cell *matCellDef="let row;">
                            {{ row?.applied_date }}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="application_starts_from">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> status </th>
                        <td mat-cell *matCellDef="let row;">
                            {{ row?.status_description}}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="admin">
                        <th mat-header-cell *matHeaderCellDef> </th>
                        <td mat-cell *matCellDef="let row; let i = index;">
                            <button *ngIf="row.status===2" mat-icon-button (click)="clickOnVacancy(row)">
                                <mat-icon svgIcon="mat_outline:edit"></mat-icon>
                            </button>
                            <button *ngIf="row.resume_attachement_id" mat-icon-button (click)="redirectUrl(row)">
                                <mat-icon svgIcon="mat_outline:attach_file"></mat-icon>
                            </button>
                            <button mat-icon-button>
                                <mat-icon svgIcon="mat_outline:visibility"></mat-icon>
                            </button>
                            <button *ngIf="row?.applied_user_id === current_user_id && row.status === 2" mat-icon-button color="warn" (click)="deleteVacancy(row, i)">
                                <mat-icon svgIcon="mat_outline:delete"></mat-icon>
                            </button>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayed_columns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayed_columns;"></tr>
                </table>
            </div>
        </div>
    </div> 
</div>
